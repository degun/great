<!doctype html>
<html {% if section %} data-current="{{ section }}"{% endif %} lang="en">

	{% include "components/head.njk" %}

	<body>
		<!-- Google Tag Manager (noscript) -->
		<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-P893TSJ"
		height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
		<!-- End Google Tag Manager (noscript) -->

		{% include "components/header.njk" %}

		<main>
			{{ layoutContent | safe }}
		</main>

		{% include "components/footer.njk" %}

		<script src="https://unpkg.com/netlify-cms-yoast-seo@~1.0/dist/main.js"></script>
    <script src="https://unpkg.com/netlify-cms@~1.4/dist/cms.js"></script>

    <script>

    CMS.registerPreviewStyle('https://unpkg.com/netlify-cms-yoast-seo@~1.0/dist/main.css');
    CMS.registerPreviewTemplate('page', createClass({
        render: function () {
            const entry = this.props.entry
            const title = entry.getIn(['data', 'title']) || ''

            YOAST.setContent({
                title: title,
                description: entry.getIn(['data', 'description']) || '',
                keyword: entry.getIn(['data', 'yoast_keyword']) || '',
                text: entry.getIn(['data', 'body']) || '',
                titleWidth: title.split('').length * 5 // 5px is an average width of each character ;)
            })

            return h('div', {},
                this.props.widgetFor('body'),
                YOAST.getScoresAsHTML(h)
            );
        }
    }));

    </script>


	</body>

</html>
